(()=>{"use strict";function t(t,e){return Math.floor(Math.random()*(e-t+1)+t)}class e{constructor({x:t,y:e,speed:n,size:s,color:c}){this.x=t,this.y=e,this.speed=n,this.size=s,this.halfSize=s/2,this.color=c}static generate(e,n){return{x:t(0,e),y:t(-25,n),size:t(10,25),speed:t(2,5),color:`rgb(${t(0,255)}, ${t(0,255)}, ${t(0,255)})`}}}class n extends e{constructor({character:t,fontStyle:e,fontFamily:n,x:s,y:c,speed:i,size:a,color:o}){super({x:s,y:c,speed:i,size:a,color:o}),this.character=t,this.fontStyle=e,this.fontFamily=n}static generate(e,n){const s="!\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~¡¢£¤¥¦§¨©ª«¬®¯°±²³´µ¶·¸¹º»¼½¾¿ÀÄÅÆÇÈËÌÏÐÑÒÕÖ×ØÙÜÝÞßàäåæçèëìïðñòö÷øùüýþÿАБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯабвгдежзийклмнопрстуфхцчшщъыьэюя",c=super.generate(e,n);return c.character=s[t(0,s.length-1)],c.fontStyle="normal",c.fontFamily="sans-serif",c}}class s{constructor(){this.context={},this.scene=[]}setContext({canvas:t,canvasCtx:e}){this.context={canvas:t,canvasCtx:e}}setScene(t){this.scene=t}update(){}draw(){}}class c extends s{update(){for(const t of this.scene)t.y=(t.y+t.speed)%this.context.canvas.height}draw(){for(const t of this.scene)this.context.canvasCtx.beginPath(),this.context.canvasCtx.fillStyle=t.color,this.context.canvasCtx.moveTo(t.x,t.y),this.context.canvasCtx.bezierCurveTo(t.x-t.halfSize,t.y+t.size,t.x+t.halfSize,t.y+t.size,t.x,t.y),this.context.canvasCtx.fill()}}class i extends s{update(){for(const t of this.scene)t.y=(t.y+t.speed)%this.context.canvas.height}draw(){for(const t of this.scene)this.context.canvasCtx.fillStyle=t.color,this.context.canvasCtx.font=`${t.fontStyle} ${t.size}px ${t.fontFamily}`,this.context.canvasCtx.fillText(t.character,t.x,t.y)}}function a(t,s){const c=[],i=[];for(let n=0;n<400;n++){const n=e.generate(t,s);c.push(new e(n))}for(let e=0;e<100;e++){const e=n.generate(t,s);i.push(new n(e))}return{dropsScene:c,characterScene:i}}(new class extends class{constructor(t){const e=document.getElementById(t);e.width=window.innerWidth,e.height=window.innerHeight,this.context={canvas:e,canvasCtx:e.getContext("2d")},this.renderers=[],this.animate=!0}init(){}setKeyDownEvent(t){document.onkeydown=t}setResizeEvent(t){window.onresize=t}addRenderer(t){t.setContext(this.context),this.renderers.push(t)}run(){this.init();const t=()=>{if(this.animate){this.context.canvasCtx.fillStyle="rgba(0, 0, 0, 0.4)",this.context.canvasCtx.fillRect(0,0,this.context.canvas.width,this.context.canvas.height);for(const t of this.renderers)t.update(),t.draw()}requestAnimationFrame(t)};t()}}{constructor(){super("rain-animation")}init(){const t=new c,e=new i,{dropsScene:n,characterScene:s}=a(this.context.canvas.width,this.context.canvas.height);t.setScene(n),e.setScene(s),this.addRenderer(t),this.addRenderer(e),this.setKeyDownEvent((t=>{"Escape"===t.key?this.animate=!1:"Enter"!==t.key||this.animate||(this.animate=!0)})),this.setResizeEvent((n=>{this.context.canvas.width=window.innerWidth,this.context.canvas.height=window.innerHeight;const{dropsScene:s,characterScene:c}=a(this.context.canvas.width,this.context.canvas.height);t.setScene(s),e.setScene(c)}))}}).run()})();